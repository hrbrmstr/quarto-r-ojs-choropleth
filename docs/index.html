<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>OJS Choropleth With Data From R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script type="module" src="index_files/libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="index_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script type="ojs-define">
{"contents":[{"name":"county_data","value":{"FIPS":["01001","01003","01005","01007","01009","01011","01013","01015","01017","01019","01021","01023","01025","01027","01029","01031","01033","01035","01037","01039","01041","01043","01045","01047","01049","01051","01053","01055","01057","01059","01061","01063","01065","01067","01069","01071","01073","01075","01077","01079","01081","01083","01085","01087","01089","01091","01093","01095","01097","01099","01101","01103","01105","01107","01109","01111","01113","01115","01117","01119","01121","01123","01125","01127","01129","01131","01133","02013","02016","02020","02050","02060","02068","02070","02090","02100","02110","02122","02130","02150","02164","02170","02180","02185","02188","02201","02220","02232","02240","02261","02270","02280","02282","02290","04001","04003","04005","04007","04009","04011","04012","04013","04015","04017","04019","04021","04023","04025","04027","05001","05003","05005","05007","05009","05011","05013","05015","05017","05019","05021","05023","05025","05027","05029","05031","05033","05035","05037","05039","05041","05043","05045","05047","05049","05051","05053","05055","05057","05059","05061","05063","05065","05067","05069","05071","05073","05075","05077","05079","05081","05083","05085","05087","05089","05091","05093","05095","05097","05099","05101","05103","05105","05107","05109","05111","05113","05115","05117","05119","05121","05123","05125","05127","05129","05131","05133","05135","05137","05139","05141","05143","05145","05147","05149","06001","06003","06005","06007","06009","06011","06013","06015","06017","06019","06021","06023","06025","06027","06029","06031","06033","06035","06037","06039","06041","06043","06045","06047","06049","06051","06053","06055","06057","06059","06061","06063","06065","06067","06069","06071","06073","06075","06077","06079","06081","06083","06085","06087","06089","06091","06093","06095","06097","06099","06101","06103","06105","06107","06109","06111","06113","06115","08001","08003","08005","08007","08009","08011","08013","08015","08017","08019","08021","08023","08025","08027","08029","08031","08033","08035","08037","08039","08041","08043","08045","08047","08049","08051","08053","08055","08057","08059","08061","08063","08065","08067","08069","08071","08073","08075","08077","08079","08081","08083","08085","08087","08089","08091","08093","08095","08097","08099","08101","08103","08105","08107","08109","08111","08113","08115","08117","08119","08121","08123","08125","09001","09003","09005","09007","09009","09011","09013","09015","10001","10003","10005","11001","12001","12003","12005","12007","12009","12011","12013","12015","12017","12019","12021","12023","12027","12029","12031","12033","12035","12037","12039","12041","12043","12045","12047","12049","12051","12053","12055","12057","12059","12061","12063","12065","12067","12069","12071","12073","12075","12077","12079","12081","12083","12085","12086","12087","12089","12091","12093","12095","12097","12099","12101","12103","12105","12107","12109","12111","12113","12115","12117","12119","12121","12123","12125","12127","12129","12131","12133","13001","13003","13005","13007","13009","13011","13013","13015","13017","13019","13021","13023","13025","13027","13029","13031","13033","13035","13037","13039","13043","13045","13047","13049","13051","13053","13055","13057","13059","13061","13063","13065","13067","13069","13071","13073","13075","13077","13079","13081","13083","13085","13087","13089","13091","13093","13095","13097","13099","13101","13103","13105","13107","13109","13111","13113","13115","13117","13119","13121","13123","13125","13127","13129","13131","13133","13135","13137","13139","13141","13143","13145","13147","13149","13151","13153","13155","13157","13159","13161","13163","13165","13167","13169","13171","13173","13175","13177","13179","13181","13183","13185","13187","13189","13191","13193","13195","13197","13199","13201","13205","13207","13209","13211","13213","13215","13217","13219","13221","13223","13225","13227","13229","13231","13233","13235","13237","13239","13241","13243","13245","13247","13249","13251","13253","13255","13257","13259","13261","13263","13265","13267","13269","13271","13273","13275","13277","13279","13281","13283","13285","13287","13289","13291","13293","13295","13297","13299","13301","13303","13305","13307","13309","13311","13313","13315","13317","13319","13321","15001","15003","15007","15009","16001","16003","16005","16007","16009","16011","16013","16015","16017","16019","16021","16023","16025","16027","16029","16031","16033","16035","16037","16039","16041","16043","16045","16047","16049","16051","16053","16055","16057","16059","16061","16063","16065","16067","16069","16071","16073","16075","16077","16079","16081","16083","16085","16087","17001","17003","17005","17007","17009","17011","17013","17015","17017","17019","17021","17023","17025","17027","17029","17031","17033","17035","17037","17039","17041","17043","17045","17047","17049","17051","17053","17055","17057","17059","17061","17063","17065","17067","17069","17071","17073","17075","17077","17079","17081","17083","17085","17087","17089","17091","17093","17095","17097","17099","17101","17103","17105","17107","17109","17111","17113","17115","17117","17119","17121","17123","17125","17127","17129","17131","17133","17135","17137","17139","17141","17143","17145","17147","17149","17151","17153","17155","17157","17159","17161","17163","17165","17167","17169","17171","17173","17175","17177","17179","17181","17183","17185","17187","17189","17191","17193","17195","17197","17199","17201","17203","18001","18003","18005","18007","18009","18011","18013","18015","18017","18019","18021","18023","18025","18027","18029","18031","18033","18035","18037","18039","18041","18043","18045","18047","18049","18051","18053","18055","18057","18059","18061","18063","18065","18067","18069","18071","18073","18075","18077","18079","18081","18083","18085","18087","18089","18091","18093","18095","18097","18099","18101","18103","18105","18107","18109","18111","18113","18115","18117","18119","18121","18123","18125","18127","18129","18131","18133","18135","18137","18139","18141","18143","18145","18147","18149","18151","18153","18155","18157","18159","18161","18163","18165","18167","18169","18171","18173","18175","18177","18179","18181","18183","19001","19003","19005","19007","19009","19011","19013","19015","19017","19019","19021","19023","19025","19027","19029","19031","19033","19035","19037","19039","19041","19043","19045","19047","19049","19051","19053","19055","19057","19059","19061","19063","19065","19067","19069","19071","19073","19075","19077","19079","19081","19083","19085","19087","19089","19091","19093","19095","19097","19099","19101","19103","19105","19107","19109","19111","19113","19115","19117","19119","19121","19123","19125","19127","19129","19131","19133","19135","19137","19139","19141","19143","19145","19147","19149","19151","19153","19155","19157","19159","19161","19163","19165","19167","19169","19171","19173","19175","19177","19179","19181","19183","19185","19187","19189","19191","19193","19195","19197","20001","20003","20005","20007","20009","20011","20013","20015","20017","20019","20021","20023","20025","20027","20029","20031","20033","20035","20037","20039","20041","20043","20045","20047","20049","20051","20053","20055","20057","20059","20061","20063","20065","20067","20069","20071","20073","20075","20077","20079","20081","20083","20085","20087","20089","20091","20093","20095","20097","20099","20101","20103","20105","20107","20109","20111","20113","20115","20117","20119","20121","20123","20125","20127","20129","20131","20133","20135","20137","20139","20141","20143","20145","20147","20149","20151","20153","20155","20157","20159","20161","20163","20165","20167","20169","20171","20173","20175","20177","20179","20181","20183","20185","20187","20189","20191","20193","20195","20197","20199","20201","20203","20205","20207","20209","21001","21003","21005","21007","21009","21011","21013","21015","21017","21019","21021","21023","21025","21027","21029","21031","21033","21035","21037","21039","21041","21043","21045","21047","21049","21051","21053","21055","21057","21059","21061","21063","21065","21067","21069","21071","21073","21075","21077","21079","21081","21083","21085","21087","21089","21091","21093","21095","21097","21099","21101","21103","21105","21107","21109","21111","21113","21115","21117","21119","21121","21123","21125","21127","21129","21131","21133","21135","21137","21139","21141","21143","21145","21147","21149","21151","21153","21155","21157","21159","21161","21163","21165","21167","21169","21171","21173","21175","21177","21179","21181","21183","21185","21187","21189","21191","21193","21195","21197","21199","21201","21203","21205","21207","21209","21211","21213","21215","21217","21219","21221","21223","21225","21227","21229","21231","21233","21235","21237","21239","22001","22003","22005","22007","22009","22011","22013","22015","22017","22019","22021","22023","22025","22027","22029","22031","22033","22035","22037","22039","22041","22043","22045","22047","22049","22051","22053","22055","22057","22059","22061","22063","22065","22067","22069","22071","22073","22075","22077","22079","22081","22083","22085","22087","22089","22091","22093","22095","22097","22099","22101","22103","22105","22107","22109","22111","22113","22115","22117","22119","22121","22123","22125","22127","23001","23003","23005","23007","23009","23011","23013","23015","23017","23019","23021","23023","23025","23027","23029","23031","24001","24003","24005","24009","24011","24013","24015","24017","24019","24021","24023","24025","24027","24029","24031","24033","24035","24037","24039","24041","24043","24045","24047","24510","25001","25003","25005","25007","25009","25011","25013","25015","25017","25019","25021","25023","25025","25027","26001","26003","26005","26007","26009","26011","26013","26015","26017","26019","26021","26023","26025","26027","26029","26031","26033","26035","26037","26039","26041","26043","26045","26047","26049","26051","26053","26055","26057","26059","26061","26063","26065","26067","26069","26071","26073","26075","26077","26079","26081","26083","26085","26087","26089","26091","26093","26095","26097","26099","26101","26103","26105","26107","26109","26111","26113","26115","26117","26119","26121","26123","26125","26127","26129","26131","26133","26135","26137","26139","26141","26143","26145","26147","26149","26151","26153","26155","26157","26159","26161","26163","26165","27001","27003","27005","27007","27009","27011","27013","27015","27017","27019","27021","27023","27025","27027","27029","27031","27033","27035","27037","27039","27041","27043","27045","27047","27049","27051","27053","27055","27057","27059","27061","27063","27065","27067","27069","27071","27073","27075","27077","27079","27081","27083","27085","27087","27089","27091","27093","27095","27097","27099","27101","27103","27105","27107","27109","27111","27113","27115","27117","27119","27121","27123","27125","27127","27129","27131","27133","27135","27137","27139","27141","27143","27145","27147","27149","27151","27153","27155","27157","27159","27161","27163","27165","27167","27169","27171","27173","28001","28003","28005","28007","28009","28011","28013","28015","28017","28019","28021","28023","28025","28027","28029","28031","28033","28035","28037","28039","28041","28043","28045","28047","28049","28051","28053","28055","28057","28059","28061","28063","28065","28067","28069","28071","28073","28075","28077","28079","28081","28083","28085","28087","28089","28091","28093","28095","28097","28099","28101","28103","28105","28107","28109","28111","28113","28115","28117","28119","28121","28123","28125","28127","28129","28131","28133","28135","28137","28139","28141","28143","28145","28147","28149","28151","28153","28155","28157","28159","28161","28163","29001","29003","29005","29007","29009","29011","29013","29015","29017","29019","29021","29023","29025","29027","29029","29031","29033","29035","29037","29039","29041","29043","29045","29047","29049","29051","29053","29055","29057","29059","29061","29063","29065","29067","29069","29071","29073","29075","29077","29079","29081","29083","29085","29087","29089","29091","29093","29095","29097","29099","29101","29103","29105","29107","29109","29111","29113","29115","29117","29119","29121","29123","29125","29127","29129","29131","29133","29135","29137","29139","29141","29143","29145","29147","29149","29151","29153","29155","29157","29159","29161","29163","29165","29167","29169","29171","29173","29175","29177","29179","29181","29183","29185","29186","29187","29189","29195","29197","29199","29201","29203","29205","29207","29209","29211","29213","29215","29217","29219","29221","29223","29225","29227","29229","29510","30001","30003","30005","30007","30009","30011","30013","30015","30017","30019","30021","30023","30025","30027","30029","30031","30033","30035","30037","30039","30041","30043","30045","30047","30049","30051","30053","30055","30057","30059","30061","30063","30065","30067","30069","30071","30073","30075","30077","30079","30081","30083","30085","30087","30089","30091","30093","30095","30097","30099","30101","30103","30105","30107","30109","30111","30113","31001","31003","31005","31007","31009","31011","31013","31015","31017","31019","31021","31023","31025","31027","31029","31031","31033","31035","31037","31039","31041","31043","31045","31047","31049","31051","31053","31055","31057","31059","31061","31063","31065","31067","31069","31071","31073","31075","31077","31079","31081","31083","31085","31087","31089","31091","31093","31095","31097","31099","31101","31103","31105","31107","31109","31111","31113","31115","31117","31119","31121","31123","31125","31127","31129","31131","31133","31135","31137","31139","31141","31143","31145","31147","31149","31151","31153","31155","31157","31159","31161","31163","31165","31167","31169","31171","31173","31175","31177","31179","31181","31183","31185","32001","32003","32005","32007","32009","32011","32013","32015","32017","32019","32021","32023","32027","32029","32031","32033","32510","33001","33003","33005","33007","33009","33011","33013","33015","33017","33019","34001","34003","34005","34007","34009","34011","34013","34015","34017","34019","34021","34023","34025","34027","34029","34031","34033","34035","34037","34039","34041","35001","35003","35005","35006","35007","35009","35011","35013","35015","35017","35019","35021","35023","35025","35027","35028","35029","35031","35033","35035","35037","35039","35041","35043","35045","35047","35049","35051","35053","35055","35057","35059","35061","36001","36003","36005","36007","36009","36011","36013","36015","36017","36019","36021","36023","36025","36027","36029","36031","36033","36035","36037","36039","36041","36043","36045","36047","36049","36051","36053","36055","36057","36059","36061","36063","36065","36067","36069","36071","36073","36075","36077","36079","36081","36083","36085","36087","36089","36091","36093","36095","36097","36099","36101","36103","36105","36107","36109","36111","36113","36115","36117","36119","36121","36123","37001","37003","37005","37007","37009","37011","37013","37015","37017","37019","37021","37023","37025","37027","37029","37031","37033","37035","37037","37039","37041","37043","37045","37047","37049","37051","37053","37055","37057","37059","37061","37063","37065","37067","37069","37071","37073","37075","37077","37079","37081","37083","37085","37087","37089","37091","37093","37095","37097","37099","37101","37103","37105","37107","37109","37111","37113","37115","37117","37119","37121","37123","37125","37127","37129","37131","37133","37135","37137","37139","37141","37143","37145","37147","37149","37151","37153","37155","37157","37159","37161","37163","37165","37167","37169","37171","37173","37175","37177","37179","37181","37183","37185","37187","37189","37191","37193","37195","37197","37199","38001","38003","38005","38007","38009","38011","38013","38015","38017","38019","38021","38023","38025","38027","38029","38031","38033","38035","38037","38039","38041","38043","38045","38047","38049","38051","38053","38055","38057","38059","38061","38063","38065","38067","38069","38071","38073","38075","38077","38079","38081","38083","38085","38087","38089","38091","38093","38095","38097","38099","38101","38103","38105","39001","39003","39005","39007","39009","39011","39013","39015","39017","39019","39021","39023","39025","39027","39029","39031","39033","39035","39037","39039","39041","39043","39045","39047","39049","39051","39053","39055","39057","39059","39061","39063","39065","39067","39069","39071","39073","39075","39077","39079","39081","39083","39085","39087","39089","39091","39093","39095","39097","39099","39101","39103","39105","39107","39109","39111","39113","39115","39117","39119","39121","39123","39125","39127","39129","39131","39133","39135","39137","39139","39141","39143","39145","39147","39149","39151","39153","39155","39157","39159","39161","39163","39165","39167","39169","39171","39173","39175","40001","40003","40005","40007","40009","40011","40013","40015","40017","40019","40021","40023","40025","40027","40029","40031","40033","40035","40037","40039","40041","40043","40045","40047","40049","40051","40053","40055","40057","40059","40061","40063","40065","40067","40069","40071","40073","40075","40077","40079","40081","40083","40085","40087","40089","40091","40093","40095","40097","40099","40101","40103","40105","40107","40109","40111","40113","40115","40117","40119","40121","40123","40125","40127","40129","40131","40133","40135","40137","40139","40141","40143","40145","40147","40149","40151","40153","41001","41003","41005","41007","41009","41011","41013","41015","41017","41019","41021","41023","41025","41027","41029","41031","41033","41035","41037","41039","41041","41043","41045","41047","41049","41051","41053","41055","41057","41059","41061","41063","41065","41067","41069","41071","42001","42003","42005","42007","42009","42011","42013","42015","42017","42019","42021","42023","42025","42027","42029","42031","42033","42035","42037","42039","42041","42043","42045","42047","42049","42051","42053","42055","42057","42059","42061","42063","42065","42067","42069","42071","42073","42075","42077","42079","42081","42083","42085","42087","42089","42091","42093","42095","42097","42099","42101","42103","42105","42107","42109","42111","42113","42115","42117","42119","42121","42123","42125","42127","42129","42131","42133","44001","44003","44005","44007","44009","45001","45003","45005","45007","45009","45011","45013","45015","45017","45019","45021","45023","45025","45027","45029","45031","45033","45035","45037","45039","45041","45043","45045","45047","45049","45051","45053","45055","45057","45059","45061","45063","45065","45067","45069","45071","45073","45075","45077","45079","45081","45083","45085","45087","45089","45091","46003","46005","46007","46009","46011","46013","46015","46017","46019","46021","46023","46025","46027","46029","46031","46033","46035","46037","46039","46041","46043","46045","46047","46049","46051","46053","46055","46057","46059","46061","46063","46065","46067","46069","46071","46073","46075","46077","46079","46081","46083","46085","46087","46089","46091","46093","46095","46097","46099","46101","46103","46105","46107","46109","46111","46113","46115","46117","46119","46121","46123","46125","46127","46129","46135","46137","47001","47003","47005","47007","47009","47011","47013","47015","47017","47019","47021","47023","47025","47027","47029","47031","47033","47035","47037","47039","47041","47043","47045","47047","47049","47051","47053","47055","47057","47059","47061","47063","47065","47067","47069","47071","47073","47075","47077","47079","47081","47083","47085","47087","47089","47091","47093","47095","47097","47099","47101","47103","47105","47107","47109","47111","47113","47115","47117","47119","47121","47123","47125","47127","47129","47131","47133","47135","47137","47139","47141","47143","47145","47147","47149","47151","47153","47155","47157","47159","47161","47163","47165","47167","47169","47171","47173","47175","47177","47179","47181","47183","47185","47187","47189","48001","48003","48005","48007","48009","48011","48013","48015","48017","48019","48021","48023","48025","48027","48029","48031","48033","48035","48037","48039","48041","48043","48045","48047","48049","48051","48053","48055","48057","48059","48061","48063","48065","48067","48069","48071","48073","48075","48077","48079","48081","48083","48085","48087","48089","48091","48093","48095","48097","48099","48101","48103","48105","48107","48109","48111","48113","48115","48117","48119","48121","48123","48125","48127","48129","48131","48133","48135","48137","48139","48141","48143","48145","48147","48149","48151","48153","48155","48157","48159","48161","48163","48165","48167","48169","48171","48173","48175","48177","48179","48181","48183","48185","48187","48189","48191","48193","48195","48197","48199","48201","48203","48205","48207","48209","48211","48213","48215","48217","48219","48221","48223","48225","48227","48229","48231","48233","48235","48237","48239","48241","48243","48245","48247","48249","48251","48253","48255","48257","48259","48261","48263","48265","48267","48269","48271","48273","48275","48277","48279","48281","48283","48285","48287","48289","48291","48293","48295","48297","48299","48301","48303","48305","48307","48309","48311","48313","48315","48317","48319","48321","48323","48325","48327","48329","48331","48333","48335","48337","48339","48341","48343","48345","48347","48349","48351","48353","48355","48357","48359","48361","48363","48365","48367","48369","48371","48373","48375","48377","48379","48381","48383","48385","48387","48389","48391","48393","48395","48397","48399","48401","48403","48405","48407","48409","48411","48413","48415","48417","48419","48421","48423","48425","48427","48429","48431","48433","48435","48437","48439","48441","48443","48445","48447","48449","48451","48453","48455","48457","48459","48461","48463","48465","48467","48469","48471","48473","48475","48477","48479","48481","48483","48485","48487","48489","48491","48493","48495","48497","48499","48501","48503","48505","48507","49001","49003","49005","49007","49009","49011","49013","49015","49017","49019","49021","49023","49025","49027","49029","49031","49033","49035","49037","49039","49041","49043","49045","49047","49049","49051","49053","49055","49057","50001","50003","50005","50007","50009","50011","50013","50015","50017","50019","50021","50023","50025","50027","51001","51003","51005","51007","51009","51011","51013","51015","51017","51019","51021","51023","51025","51027","51029","51031","51033","51035","51036","51037","51041","51043","51045","51047","51049","51051","51053","51057","51059","51061","51063","51065","51067","51069","51071","51073","51075","51077","51079","51081","51083","51085","51087","51089","51091","51093","51095","51097","51099","51101","51103","51105","51107","51109","51111","51113","51115","51117","51119","51121","51125","51127","51131","51133","51135","51137","51139","51141","51143","51145","51147","51149","51153","51155","51157","51159","51161","51163","51165","51167","51169","51171","51173","51175","51177","51179","51181","51183","51185","51187","51191","51193","51195","51197","51199","51510","51515","51520","51530","51540","51550","51560","51570","51580","51590","51595","51600","51610","51620","51630","51640","51650","51660","51670","51678","51680","51683","51685","51690","51700","51710","51720","51730","51735","51740","51750","51760","51770","51775","51780","51790","51800","51810","51820","51830","51840","53001","53003","53005","53007","53009","53011","53013","53015","53017","53019","53021","53023","53025","53027","53029","53031","53033","53035","53037","53039","53041","53043","53045","53047","53049","53051","53053","53055","53057","53059","53061","53063","53065","53067","53069","53071","53073","53075","53077","54001","54003","54005","54007","54009","54011","54013","54015","54017","54019","54021","54023","54025","54027","54029","54031","54033","54035","54037","54039","54041","54043","54045","54047","54049","54051","54053","54055","54057","54059","54061","54063","54065","54067","54069","54071","54073","54075","54077","54079","54081","54083","54085","54087","54089","54091","54093","54095","54097","54099","54101","54103","54105","54107","54109","55001","55003","55005","55007","55009","55011","55013","55015","55017","55019","55021","55023","55025","55027","55029","55031","55033","55035","55037","55039","55041","55043","55045","55047","55049","55051","55053","55055","55057","55059","55061","55063","55065","55067","55069","55071","55073","55075","55077","55078","55079","55081","55083","55085","55087","55089","55091","55093","55095","55097","55099","55101","55103","55105","55107","55109","55111","55113","55115","55117","55119","55121","55123","55125","55127","55129","55131","55133","55135","55137","55139","55141","56001","56003","56005","56007","56009","56011","56013","56015","56017","56019","56021","56023","56025","56027","56029","56031","56033","56035","56037","56039","56041","56043","56045","60010","60020","60020","60020","60050","66010","66010","69100","69110","69120","69120","72001","72003","72005","72007","72009","72011","72013","72015","72017","72019","72021","72023","72025","72027","72029","72031","72033","72035","72037","72041","72043","72045","72047","72049","72051","72053","72054","72055","72057","72059","72061","72063","72065","72067","72071","72073","72075","72077","72079","72081","72083","72085","72087","72089","72091","72093","72095","72097","72099","72101","72103","72105","72107","72109","72111","72113","72115","72117","72119","72121","72123","72125","72127","72129","72131","72133","72135","72137","72139","72141","72143","72145","72147","72149","72151","72153","78010","78020","78030"],"value":[974,547,946,778,543,568,693,115,252,662,551,576,729,145,641,995,519,325,84,818,717,663,348,522,606,313,649,728,717,753,462,631,993,480,715,668,565,457,267,409,875,818,33,0,815,327,195,236,394,840,653,514,999,882,792,767,183,647,415,968,375,192,354,255,995,732,152,955,265,476,526,526,46,296,474,636,246,470,807,266,771,905,883,816,557,239,272,291,101,636,386,553,826,728,900,767,982,116,238,104,308,416,794,680,317,458,766,18,98,989,324,559,507,203,579,637,872,109,410,480,513,268,943,102,908,474,194,899,706,179,660,796,452,785,722,971,879,542,811,159,910,892,761,67,814,253,907,73,738,875,796,251,749,119,306,743,388,524,115,558,94,88,838,881,263,322,989,83,145,698,568,686,958,87,196,321,54,841,736,89,440,760,335,397,192,855,160,363,792,55,980,69,898,144,712,307,725,744,882,657,249,824,703,850,815,234,810,414,362,619,69,315,916,425,984,670,529,603,876,813,761,751,188,478,834,310,170,927,196,69,83,443,239,824,693,573,694,178,218,49,712,763,205,537,493,376,56,360,397,717,794,767,964,788,390,970,459,121,849,456,941,283,991,197,865,61,743,725,572,356,153,531,822,666,168,86,545,63,310,578,840,208,470,915,547,296,435,138,301,79,332,123,289,641,967,360,83,597,863,626,87,542,769,332,503,270,540,359,278,257,930,764,219,802,332,341,174,741,273,435,763,400,235,225,944,627,924,291,518,156,322,888,560,44,799,614,340,416,273,537,132,790,183,411,721,10,169,574,9,912,14,691,729,163,367,930,363,815,504,733,319,616,572,356,585,889,729,652,239,953,514,183,279,436,214,354,913,896,972,727,994,191,536,12,518,256,105,840,591,601,741,724,320,879,104,646,784,34,785,233,347,119,655,88,875,617,685,293,974,275,353,252,953,261,311,79,339,748,377,524,574,161,724,247,423,111,210,701,239,89,213,122,183,264,99,520,116,376,691,132,962,34,616,557,44,736,409,258,843,316,147,502,239,632,45,334,982,247,869,128,528,156,389,840,545,106,363,397,600,632,652,293,305,460,292,452,663,552,483,113,610,37,159,594,104,540,559,882,720,276,770,969,501,496,720,174,116,397,360,90,865,965,428,77,849,79,887,585,350,466,480,63,787,442,257,155,528,853,212,147,150,706,73,57,551,49,984,921,815,167,940,438,615,722,16,576,666,678,713,641,571,482,548,887,174,495,384,445,247,333,418,739,307,351,599,218,565,470,438,951,937,583,965,900,176,978,631,330,136,971,304,714,16,947,366,457,604,48,179,7,511,943,54,112,454,957,753,382,441,396,11,272,198,958,208,373,969,720,144,930,931,343,627,622,352,993,828,905,612,904,342,954,781,474,643,338,456,531,181,636,345,473,65,182,346,981,640,245,332,6,978,875,60,728,302,957,933,904,536,278,647,425,164,331,415,998,800,954,941,263,491,119,227,769,273,126,440,155,236,352,110,252,989,622,191,919,73,340,38,121,886,933,232,82,699,13,674,340,164,904,805,42,85,60,694,412,328,576,669,472,573,406,351,774,33,213,214,182,608,914,644,198,329,52,204,116,589,79,986,478,467,780,52,286,98,720,436,856,649,981,853,524,684,319,396,407,992,247,45,163,266,968,717,927,214,954,392,764,36,893,471,77,45,258,615,742,707,729,562,973,659,952,836,323,204,292,436,437,325,306,806,579,208,280,876,278,328,206,777,484,388,787,139,604,699,633,684,810,26,337,741,681,540,958,179,860,840,795,454,254,991,77,52,163,762,122,3,23,245,817,99,853,471,71,799,353,535,616,502,146,109,724,573,262,181,108,847,609,56,392,222,700,436,539,724,657,379,946,272,307,190,400,972,999,461,808,928,907,572,928,224,352,820,910,596,333,682,548,570,836,756,362,896,533,109,283,106,591,18,25,569,684,15,30,300,206,292,354,230,838,556,524,415,454,332,240,512,272,46,128,952,632,257,908,148,73,328,683,290,894,649,732,995,932,443,363,721,395,519,404,985,583,448,238,978,434,177,900,208,326,538,436,484,765,658,910,393,9,290,493,752,274,293,582,639,560,166,585,605,362,776,645,875,806,310,172,216,344,899,546,178,368,47,769,214,341,697,486,814,936,906,542,198,476,575,122,929,406,222,376,205,218,989,555,964,366,874,859,410,7,522,847,151,576,136,720,689,427,59,508,279,652,709,403,634,458,819,756,708,449,988,205,780,73,131,375,240,19,467,15,164,643,354,992,227,760,271,730,617,295,687,221,549,155,576,106,437,623,427,454,284,362,594,674,20,218,114,615,149,476,821,491,808,210,994,289,305,942,680,905,859,513,463,622,750,524,101,742,523,251,818,5,605,380,257,817,160,618,458,33,488,724,497,913,275,737,398,832,786,338,171,351,804,606,39,656,807,730,14,686,442,786,684,713,11,1,299,699,336,201,622,753,872,299,354,193,362,255,646,633,701,530,937,889,861,121,890,840,788,576,396,814,972,912,772,616,345,210,152,423,466,132,163,947,856,666,839,459,981,877,232,985,575,726,241,957,469,990,473,802,914,212,837,426,343,25,347,213,282,752,260,136,755,116,777,351,227,210,111,319,397,373,137,126,919,280,168,704,342,974,104,123,916,275,311,157,309,186,29,833,48,905,794,776,821,208,778,866,687,68,578,145,979,505,854,46,850,729,849,532,24,152,720,609,443,669,216,445,639,497,858,553,349,752,370,650,621,738,225,753,931,509,623,942,147,406,2,355,467,66,476,481,710,987,362,760,183,901,222,895,846,320,998,664,877,871,737,922,611,623,545,60,493,907,924,811,318,829,706,842,508,948,373,563,735,829,362,889,663,651,115,897,439,314,404,252,495,198,210,51,189,237,307,743,547,601,794,406,654,10,934,449,17,537,121,71,981,231,353,819,483,661,336,273,760,610,170,876,149,877,392,366,659,911,641,442,377,886,320,489,702,936,866,215,149,105,630,83,889,278,676,386,128,533,241,346,100,211,466,822,105,576,943,943,15,425,965,866,297,689,963,274,215,243,776,30,910,506,788,541,418,62,275,399,52,862,749,624,893,189,742,831,870,566,925,622,321,542,523,68,455,438,957,136,626,604,557,53,619,445,55,713,764,153,900,412,583,293,356,182,18,0,494,451,95,195,658,133,451,431,44,763,39,217,246,497,616,452,187,67,712,915,889,142,957,120,494,882,194,741,775,125,866,298,106,136,41,398,489,883,904,426,905,827,318,103,1,866,948,209,710,439,159,138,336,243,565,92,829,538,974,625,251,318,593,712,201,475,540,300,843,331,75,969,705,561,473,399,85,123,291,595,238,333,662,321,371,145,614,667,652,8,616,384,106,788,669,919,730,366,454,99,824,573,114,21,309,225,659,617,344,585,954,725,597,173,669,665,150,751,590,136,157,762,14,6,439,498,18,442,949,890,945,861,362,578,586,394,13,922,860,496,709,292,162,221,633,250,282,199,742,322,894,171,149,371,250,200,312,385,186,764,497,377,646,989,62,471,929,114,631,36,350,567,777,83,222,359,805,104,333,955,935,273,643,288,4,796,782,457,581,516,569,806,611,703,582,629,380,174,536,410,918,222,736,166,729,845,362,972,620,421,670,402,406,805,803,707,726,787,192,68,526,740,190,381,273,76,775,350,360,840,146,812,668,568,978,271,371,248,962,346,20,172,451,814,552,239,561,462,456,603,483,636,432,295,288,25,258,158,500,271,179,712,331,691,747,411,686,2,353,146,649,813,120,921,178,89,40,639,287,662,450,933,959,34,989,675,255,539,512,815,623,931,683,415,191,379,302,644,469,351,375,338,940,376,353,324,295,966,195,880,739,236,271,258,555,939,452,41,788,0,365,797,188,172,526,827,278,594,594,688,173,990,583,491,729,834,966,175,559,483,515,748,359,369,921,435,886,120,605,593,420,846,321,361,280,981,680,275,136,105,657,342,41,176,125,543,206,370,905,640,144,135,637,312,716,328,999,933,743,155,409,924,428,739,287,974,19,367,693,365,433,390,712,659,802,853,679,732,566,143,116,611,335,618,828,160,229,445,63,541,610,447,968,674,22,948,465,743,191,900,87,211,0,406,343,403,512,902,311,371,4,795,844,455,626,889,327,244,259,303,142,283,365,370,502,305,196,811,704,688,242,456,718,852,872,23,959,56,46,324,570,941,490,215,491,931,982,703,234,389,928,378,971,698,579,25,867,41,20,161,598,491,210,795,991,802,329,888,90,170,906,595,82,44,608,263,616,293,520,843,492,610,599,67,514,36,154,560,844,941,398,162,409,302,108,258,136,249,984,552,924,294,184,556,278,942,389,341,822,847,236,671,510,26,743,876,17,550,532,225,985,299,691,710,221,391,286,275,866,502,808,15,733,639,39,90,443,111,689,338,631,808,968,527,81,316,793,650,864,987,177,47,616,651,427,491,587,749,698,301,901,225,521,842,841,196,314,592,568,913,522,425,69,331,105,626,420,563,511,894,137,738,547,852,38,210,121,632,381,654,303,789,702,794,300,488,680,326,769,776,353,572,672,415,37,365,427,900,581,90,990,277,934,223,281,81,754,805,895,432,803,210,217,943,433,225,625,136,352,328,239,867,722,405,747,46,748,463,342,396,106,690,573,968,330,189,176,84,726,325,526,0,55,864,772,976,303,404,508,637,4,719,269,673,612,582,386,388,543,690,547,597,659,348,204,104,20,825,270,771,854,85,88,176,869,372,643,573,932,274,811,392,899,832,977,804,425,582,670,546,142,122,41,729,244,837,745,660,794,723,585,907,334,215,68,222,330,357,946,61,115,421,373,997,667,899,646,903,96,39,824,564,554,421,284,193,453,33,499,800,232,199,571,917,583,223,15,263,612,339,255,892,177,921,855,456,400,581,968,366,487,836,165,567,316,679,544,534,197,446,23,169,632,56,145,274,763,594,928,437,499,925,365,935,239,247,504,335,344,383,289,663,164,302,30,330,367,776,514,160,241,655,860,672,697,885,16,421,62,999,265,234,358,398,244,44,37,665,899,883,901,893,897,25,524,605,891,241,873,334,878,138,509,797,558,464,640,710,57,591,129,467,781,851,623,361,361,927,131,382,834,665,906,509,279,429,36,979,913,888,875,567,216,697,114,228,294,464,218,790,266,749,617,109,807,860,552,741,314,977,637,368,741,272,353,251,342,245,282,917,853,712,252,546,593,152,37,450,426,28,116,46,327,482,722,356,558,602,353,736,769,246,258,170,806,339,19,263,832,964,136,264,116,378,859,833,322,351,847,589,661,719,302,510,251,601,212,131,450,102,192,525,387,519,346,66,189,188,722,305,55,815,140,540,176,724,379,790,820,309,201,174,942,495,178,97,927,912,520,420,906,992,392,891,94,88,939,850,251,51,126,392,903,293,306,283,706,938,638,966,917,828,804,996,192,767,518,492,787,546,476,147,783,770,924,594,502,448,193,296,330,45,292,378,899,201,108,116,87,508,768,903,416,113,589,546,189,588,476,386,504,786,48,1,436,537,862,913,849,128,492,532,676,595,397,403,602,987,522,565,149,550,250,756,361,585,743,603,339,955,380,857,440,628,753,269,921,529,338,347,918,408,797,945,925,164,330,807,708,103,456,187,560,465,544,990,914,446,650,469,204,222,827,687,433,800,28,656,509,36,585,79,233,759,702,719,850,719,660,84,228,560,859,574,826,360,326,449,594,658,288,408,508,323,716,921,589,530,725,596,180,894,370,943,640,501,798,263,887,180,20,129,421,127,178,182,544,651,980,800,231,832,831,332,424,103,148,98,520,167,306,252,260,978,618,383,574,659,310,428,703,237,746,819,335,999,293,189,87,191,353,532,764,440,303,152,357,216,603,469,214,501,513,692,499,997,758,435,45,884,913,970,943,511,197,669,732,852,348,8,698,992,608,660,828,619,796,834,704,697,220,284,449,627,693,288,824,720,340,806,553,355,192,727,370,111,546,207,204,968,950,24,740,465,533,255,331,391,278,480,449,926,315,194,287,478,556,89,853,475,227,865,351,445,968,145,750,901,469,476,530,778,39,658,648,177,755,703,361,127,292,333,895,285,541,331,29,970,704,58,998,349,437,698,356,151,678,663,290,970,840,581,789,743,497,86,702,47,860,479,20,859,598,9,910,885,643,143,555,141,433,547,390,900,891,533,905,971,894,353,980,583,161,374,992,763,143,669,468,491,985,351,819,649,696,670,228,692,407,309,6,974,547,991,852,923,901,942,807,973,678,607,611,665,944,611,990,454,11,71,993,124,614,7,586,465,44,808,484,24,174,235,148,358,982,746,623,891,253,370,151,638,219,963,911,870,328,856,565,45,561,651,718,232,530,857,191,949,377,337,94,269,545,830,176,559,571,569,783,332,867,240,180,180,7,77,16,696,524,208,161,99,402,520,284,583,715,671,26,749,917,615,274,149,35,811,524,723,689,70,959,629,532,835,992,843,800,396,661,140,957,44,126,825,396,877,499,394,46,14,995,445,923,155,899,84,769,76,386,6,168,768,412,253,837,673,456,637,460,788,222,182,440,314,568,890,67,65,149,702,945,357,35,54,133,76,66,325,702,601,492,133,327,625,361,444,930,608,138,964,438,303,758,705,866,177,215,831,44,480,552,115,912,54,760,525,490,948,479,572,600,30,819,812,494,464,506,757,731,852,10,32,670,153,413,851,152,449,317,953,35,56,758,954,933,302,766,517,399,835,853,329,735,490,79,679,927,681,476,86,377,14,234,889,439,605,677,521,859,252,594,653,444,702,249,865,285,208,662,576,607,930,110,376,387,955,55,203,276,370,889,329,189,264,647,313,798,709,57,331,525,90,912,174,244,470,460,91,577,221,213,73,214,54,284,401,782,561,120,5,282,715,426,698,262,350,697,823,141,159,183,859,564,591,793,392,264,194,19,849,82,109,123,202,482,908,218,741,910,757,604,883,977,485,87,400,208,373,926,967,130,998,33,660,381,292,123,562,826,14,226,291,707,643,55,745,747,273,69,740,955,261,350,198,185,23,798,673,997,884,318,772,437,939,446,638,236,692,415,872,157,712,224,848,85,383,442,512,42,522,539,953,890,457,388,443,130,423,119,854,377,189,116,466,635,925,338,683,838,544,902,712,267,427,176,698,384,901,41,391,375,337,987,454,490,264,2,1,765,445,571,725,787,587,945,870,136,462,864,93,808,586,128,243,613,439,634,394,709,986,932,821,778,613,990,208,752,881,979,624,658,90,718,718,552,11,480,429,759,292]}}]}
</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">OJS Choropleth With Data From R</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>A small Quarto project/document that:</p>
<ul>
<li>(optionall) grabs the latest NOAA watches/warnings/hazaards shapefile</li>
<li>displays an AlbersUSA projected map</li>
<li>uses synthesized data from R as the basis for county-level data</li>
<li>fills by county based on ^^ data</li>
<li>overlays the areas with current hazards/warnings/watches</li>
</ul>
<p>Go to this project directory and do:</p>
<ul>
<li><code>quarto render</code> or <code>quarto render -P update:TRUE</code> if you want a new NOAA shapefile</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `current_all' from data source 
  `/Users/hrbrmstr/projects/quarto-r-ojs-choropleth/current-all.geojson' 
  using driver `GeoJSON'
Simple feature collection with 1067 features and 13 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: 17 xmax: 180 ymax: 70.09123
Geodetic CRS:  WGS 84
Writing layer `current-all' to data source 
  `current-all.geojson' using driver `GeoJSON'
Writing 1067 features with 13 fields and geometry type Multi Polygon.</code></pre>
</div>
</div>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="69" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 68;"><span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;style&gt;</span></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a><span class="vs">.d3-tip {</span></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a><span class="vs">  background-color: white;</span></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a><span class="vs">  color: black;</span></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a><span class="vs">  border: 1px solid black;</span></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a><span class="vs">  padding: 6px;</span></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a><span class="vs">  font-size: 10pt;</span></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a><span class="vs">  line-height: 0.9;</span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a><span class="vs">  border-radius: 6px;</span></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a><span class="vs">  pointer-events: none;</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a><span class="vs">.county {</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a><span class="vs">.state {</span></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a><span class="vs">  pointer-events: none;</span></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/style&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="93" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 92;"><span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">'d3@7'</span><span class="op">,</span> <span class="st">'d3-geo@3'</span>)</span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>topojson <span class="op">=</span> <span class="pp">require</span>(<span class="st">'topojson-client@3'</span>)</span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>d3tip <span class="op">=</span> <span class="pp">require</span>(<span class="st">'https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.9.1/d3-tip.js'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="98" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 97;"><span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { Legend } <span class="im">from</span> <span class="st">'@d3/color-legend'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="103" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 102;"><span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a>projection <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoAlbersUsa</span>()</span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a>alb_path <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoPath</span>()<span class="op">.</span><span class="fu">projection</span>(projection)</span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a>alt_us <span class="op">=</span> <span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">'current-all.geojson'</span>)<span class="op">.</span><span class="fu">json</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="108" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 107;"><span id="cb6-108"><a href="#cb6-108" aria-hidden="true" tabindex="-1"></a>us <span class="op">=</span> <span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">'counties-10m.json'</span>)<span class="op">.</span><span class="fu">json</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb7" data-startfrom="112" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 111;"><span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a>county_data_transposed <span class="op">=</span> <span class="fu">transpose</span>(county_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="116" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 115;"><span id="cb8-116"><a href="#cb8-116" aria-hidden="true" tabindex="-1"></a>map_data <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>(county_data_transposed<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> [ d<span class="op">.</span><span class="at">FIPS</span><span class="op">,</span> d<span class="op">.</span><span class="at">value</span> ]))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb9" data-startfrom="121" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 120;"><span id="cb9-121"><a href="#cb9-121" aria-hidden="true" tabindex="-1"></a>value_range <span class="op">=</span> d3<span class="op">.</span><span class="fu">extent</span>(county_data_transposed<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">value</span>))</span>
<span id="cb9-122"><a href="#cb9-122" aria-hidden="true" tabindex="-1"></a>scale_fill_viridis_cividis <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleSequential</span>(d3<span class="op">.</span><span class="at">interpolateCividis</span>)<span class="op">.</span><span class="fu">domain</span>(value_range)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-8-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-8-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb10" data-startfrom="125" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 124;"><span id="cb10-125"><a href="#cb10-125" aria-hidden="true" tabindex="-1"></a><span class="fu">Legend</span>(d3<span class="op">.</span><span class="fu">scaleSequential</span>(value_range<span class="op">,</span> d3<span class="op">.</span><span class="at">interpolateCividis</span>)<span class="op">,</span> {</span>
<span id="cb10-126"><a href="#cb10-126" aria-hidden="true" tabindex="-1"></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">'Some Descriptive Legend Title'</span></span>
<span id="cb10-127"><a href="#cb10-127" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb11" data-startfrom="131" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 130;"><span id="cb11-131"><a href="#cb11-131" aria-hidden="true" tabindex="-1"></a>chart <span class="op">=</span> {</span>
<span id="cb11-132"><a href="#cb11-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-133"><a href="#cb11-133" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> width <span class="op">=</span> <span class="dv">960</span></span>
<span id="cb11-134"><a href="#cb11-134" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> height <span class="op">=</span> <span class="dv">600</span></span>
<span id="cb11-135"><a href="#cb11-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-136"><a href="#cb11-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-137"><a href="#cb11-137" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb11-138"><a href="#cb11-138" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> width)</span>
<span id="cb11-139"><a href="#cb11-139" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> height)</span>
<span id="cb11-140"><a href="#cb11-140" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> width<span class="op">,</span> height])</span>
<span id="cb11-141"><a href="#cb11-141" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"style"</span><span class="op">,</span> <span class="st">"width: 100%; height: auto; height: intrinsic;"</span>)</span>
<span id="cb11-142"><a href="#cb11-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-143"><a href="#cb11-143" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> tip <span class="op">=</span> <span class="fu">d3tip</span>()<span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'d3-tip'</span>)</span>
<span id="cb11-144"><a href="#cb11-144" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">html</span>((evt<span class="op">,</span> d) <span class="kw">=&gt;</span> map_data<span class="op">.</span><span class="fu">get</span>(d<span class="op">.</span><span class="at">id</span>))</span>
<span id="cb11-145"><a href="#cb11-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-146"><a href="#cb11-146" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">call</span>(tip)</span>
<span id="cb11-147"><a href="#cb11-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-148"><a href="#cb11-148" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb11-149"><a href="#cb11-149" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"county"</span>)</span>
<span id="cb11-150"><a href="#cb11-150" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb11-151"><a href="#cb11-151" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(topojson<span class="op">.</span><span class="fu">feature</span>(us<span class="op">,</span> us<span class="op">.</span><span class="at">objects</span><span class="op">.</span><span class="at">counties</span>)<span class="op">.</span><span class="at">features</span>)</span>
<span id="cb11-152"><a href="#cb11-152" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb11-153"><a href="#cb11-153" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb11-154"><a href="#cb11-154" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">'fill'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scale_fill_viridis_cividis</span>(d<span class="op">.</span><span class="at">val</span> <span class="op">=</span> map_data<span class="op">.</span><span class="fu">get</span>(d<span class="op">.</span><span class="at">id</span>)))</span>
<span id="cb11-155"><a href="#cb11-155" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">on</span>(<span class="st">'mouseover'</span><span class="op">,</span> tip<span class="op">.</span><span class="at">show</span>)</span>
<span id="cb11-156"><a href="#cb11-156" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">on</span>(<span class="st">'mouseout'</span> <span class="op">,</span> tip<span class="op">.</span><span class="at">hide</span>)</span>
<span id="cb11-157"><a href="#cb11-157" aria-hidden="true" tabindex="-1"></a>        <span class="co">// .on('click', (evt, d) =&gt; console.log(d)) //window.location.href = "https://kagi.com/search?q=" + d.id  }) // whatev</span></span>
<span id="cb11-158"><a href="#cb11-158" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">'stroke'</span><span class="op">,</span> <span class="st">'#c3c3c399'</span>)</span>
<span id="cb11-159"><a href="#cb11-159" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">'stroke-width'</span><span class="op">,</span> <span class="fl">0.5</span>)</span>
<span id="cb11-160"><a href="#cb11-160" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">'d'</span><span class="op">,</span> alb_path) <span class="co">// projected path</span></span>
<span id="cb11-161"><a href="#cb11-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-162"><a href="#cb11-162" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb11-163"><a href="#cb11-163" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">datum</span>(topojson<span class="op">.</span><span class="fu">mesh</span>(us<span class="op">,</span> us<span class="op">.</span><span class="at">objects</span><span class="op">.</span><span class="at">states</span><span class="op">,</span> (a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">!==</span> b))</span>
<span id="cb11-164"><a href="#cb11-164" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'state'</span>)</span>
<span id="cb11-165"><a href="#cb11-165" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'fill'</span><span class="op">,</span> <span class="st">'none'</span>)</span>
<span id="cb11-166"><a href="#cb11-166" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'stroke'</span><span class="op">,</span> <span class="st">'#ffffff'</span>)</span>
<span id="cb11-167"><a href="#cb11-167" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'stroke-width'</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb11-168"><a href="#cb11-168" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> alb_path) <span class="co">// projected path</span></span>
<span id="cb11-169"><a href="#cb11-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-170"><a href="#cb11-170" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb11-171"><a href="#cb11-171" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb11-172"><a href="#cb11-172" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">data</span>(alt_us<span class="op">.</span><span class="at">features</span>)</span>
<span id="cb11-173"><a href="#cb11-173" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">'path'</span>)</span>
<span id="cb11-174"><a href="#cb11-174" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'stroke'</span><span class="op">,</span> <span class="st">'#e31a1c'</span>)</span>
<span id="cb11-175"><a href="#cb11-175" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'stroke-width'</span><span class="op">,</span> <span class="fl">0.5</span>)</span>
<span id="cb11-176"><a href="#cb11-176" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'fill'</span><span class="op">,</span> <span class="st">'#252525aa'</span>)</span>
<span id="cb11-177"><a href="#cb11-177" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'d'</span><span class="op">,</span> alb_path) <span class="co">// projected path</span></span>
<span id="cb11-178"><a href="#cb11-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-179"><a href="#cb11-179" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span>(svg<span class="op">.</span><span class="fu">node</span>())</span>
<span id="cb11-180"><a href="#cb11-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-181"><a href="#cb11-181" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="declaration">

</div>
</div>
</div>
<!-- -->


</main>
<!-- /main column -->
<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"html`<style>\n.d3-tip {\n  background-color: white;\n  color: black;\n  border: 1px solid black;\n  padding: 6px;\n  font-size: 10pt;\n  line-height: 0.9;\n  border-radius: 6px;\n  pointer-events: none;\n}\n\n.county {\n}\n\n.state {\n  pointer-events: none;\n}\n\n</style>`\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"d3 = require('d3@7', 'd3-geo@3')\ntopojson = require('topojson-client@3')\nd3tip = require('https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.9.1/d3-tip.js')\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"import { Legend } from '@d3/color-legend'\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"projection = d3.geoAlbersUsa()\nalb_path = d3.geoPath().projection(projection)\nalt_us = await FileAttachment('current-all.geojson').json()\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"us = await FileAttachment('counties-10m.json').json()\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"county_data_transposed = transpose(county_data)\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":"map_data = new Map(county_data_transposed.map(d => [ d.FIPS, d.value ]));\n"},{"methodName":"interpret","cellName":"ojs-cell-8","inline":false,"source":"value_range = d3.extent(county_data_transposed.map(d => d.value))\nscale_fill_viridis_cividis = d3.scaleSequential(d3.interpolateCividis).domain(value_range)\n"},{"methodName":"interpret","cellName":"ojs-cell-9","inline":false,"source":"Legend(d3.scaleSequential(value_range, d3.interpolateCividis), {\n  title: 'Some Descriptive Legend Title'\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-10","inline":false,"source":"chart = {\n\n  const width = 960\n  const height = 600\n\n\n  const svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height)\n    .attr(\"viewBox\", [0, 0, width, height])\n    .attr(\"style\", \"width: 100%; height: auto; height: intrinsic;\")\n\n  const tip = d3tip().attr('class', 'd3-tip')\n                .html((evt, d) => map_data.get(d.id))\n\n  svg.call(tip)\n\n  svg.append(\"g\")\n    .attr(\"class\", \"county\")\n    .selectAll(\"path\")\n    .data(topojson.feature(us, us.objects.counties).features)\n    .enter()\n      .append(\"path\")\n        .style('fill', d => scale_fill_viridis_cividis(d.val = map_data.get(d.id)))\n        .on('mouseover', tip.show)\n        .on('mouseout' , tip.hide)\n        // .on('click', (evt, d) => console.log(d)) //window.location.href = \"https://kagi.com/search?q=\" + d.id  }) // whatev\n        .attr('stroke', '#c3c3c399')\n        .attr('stroke-width', 0.5)\n        .attr('d', alb_path) // projected path\n\n  svg.append(\"path\")\n    .datum(topojson.mesh(us, us.objects.states, (a, b) => a !== b))\n    .attr('class', 'state')\n    .attr('fill', 'none')\n    .attr('stroke', '#ffffff')\n    .attr('stroke-width', 2)\n    .attr(\"d\", alb_path) // projected path\n\n  svg.append(\"g\")\n\t  .selectAll(\"path\")\n\t  .data(alt_us.features)\n  \t.join('path')\n    .attr('stroke', '#e31a1c')\n    .attr('stroke-width', 0.5)\n    .attr('fill', '#252525aa')\n    .attr('d', alb_path) // projected path\n\n  return(svg.node())\n\n}\n"}]}
</script>
<script type="module">
window._ojs.paths.runtimeToDoc = "../../..";
window._ojs.paths.runtimeToRoot = "../../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb12" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "OJS Choropleth With Data From R"</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="an">params:</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">  update: FALSE</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">    message: false</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">    warning: false</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">    echo: false</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>A small Quarto project/document that:</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>(optionall) grabs the latest NOAA watches/warnings/hazaards shapefile</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>displays an AlbersUSA projected map </span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>uses synthesized data from R as the basis for county-level data</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>fills by county based on ^^ data</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>overlays the areas with current hazards/warnings/watches</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>Go to this project directory and do:</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`quarto render`</span> or <span class="in">`quarto render -P update:TRUE`</span> if you want a new NOAA shapefile</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="in">```{r data-create}</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(<span class="st">"counties-10m.json"</span>)) {</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(<span class="st">"https://cdn.jsdelivr.net/npm/us-atlas@3/counties-10m.json"</span>, <span class="st">"counties-10m.json"</span>)</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> ((params<span class="sc">$</span>update) <span class="sc">||</span> (<span class="sc">!</span>(<span class="fu">file.exists</span>(<span class="st">"current-all.geojson"</span>)))) {</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(gdalUtilities)</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(sf)</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">url =</span> <span class="st">"https://tgftp.nws.noaa.gov/SL.us008001/DF.sha/DC.cap/DS.WWA/current_all.tar.gz"</span>,</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">destfile =</span> <span class="st">"current_all.tar.gz"</span> </span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlink</span>(<span class="st">"current-all.geojson"</span>, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>  gdalUtilities<span class="sc">::</span><span class="fu">ogr2ogr</span>(</span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">src_datasource_name =</span> <span class="st">"/vsitar/current_all.tar.gz"</span>,</span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">dst_datasource_name =</span> <span class="st">"current-all.geojson"</span>,</span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">f =</span> <span class="st">"GeoJSON"</span>,</span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">t_srs =</span> <span class="st">"crs:84"</span></span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="st">"current-all.geojson"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>    rmapshaper<span class="sc">::</span><span class="fu">ms_simplify</span>() <span class="ot">-&gt;</span> current_all</span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlink</span>(<span class="st">"current-all.geojson"</span>, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_write</span>(current_all, <span class="st">"current-all.geojson"</span>)</span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a>  <span class="at">FIPS =</span> <span class="fu">read_lines</span>(<span class="st">"https://rud.is/dl/counties.txt"</span>),</span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">as.integer</span>(<span class="fu">runif</span>(<span class="fu">length</span>(FIPS), <span class="dv">0</span>, <span class="dv">1000</span>))</span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a>) <span class="ot">-&gt;</span> county_data</span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb12-64"><a href="#cb12-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-65"><a href="#cb12-65" aria-hidden="true" tabindex="-1"></a><span class="in">```{r data-include}</span></span>
<span id="cb12-66"><a href="#cb12-66" aria-hidden="true" tabindex="-1"></a><span class="fu">ojs_define</span>(<span class="at">county_data =</span> county_data)</span>
<span id="cb12-67"><a href="#cb12-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb12-68"><a href="#cb12-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-69"><a href="#cb12-69" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs html}</span></span>
<span id="cb12-70"><a href="#cb12-70" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;style&gt;</span></span>
<span id="cb12-71"><a href="#cb12-71" aria-hidden="true" tabindex="-1"></a><span class="vs">.d3-tip {</span></span>
<span id="cb12-72"><a href="#cb12-72" aria-hidden="true" tabindex="-1"></a><span class="vs">  background-color: white;</span></span>
<span id="cb12-73"><a href="#cb12-73" aria-hidden="true" tabindex="-1"></a><span class="vs">  color: black;</span></span>
<span id="cb12-74"><a href="#cb12-74" aria-hidden="true" tabindex="-1"></a><span class="vs">  border: 1px solid black;</span></span>
<span id="cb12-75"><a href="#cb12-75" aria-hidden="true" tabindex="-1"></a><span class="vs">  padding: 6px;</span></span>
<span id="cb12-76"><a href="#cb12-76" aria-hidden="true" tabindex="-1"></a><span class="vs">  font-size: 10pt;</span></span>
<span id="cb12-77"><a href="#cb12-77" aria-hidden="true" tabindex="-1"></a><span class="vs">  line-height: 0.9;</span></span>
<span id="cb12-78"><a href="#cb12-78" aria-hidden="true" tabindex="-1"></a><span class="vs">  border-radius: 6px;</span></span>
<span id="cb12-79"><a href="#cb12-79" aria-hidden="true" tabindex="-1"></a><span class="vs">  pointer-events: none;</span></span>
<span id="cb12-80"><a href="#cb12-80" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb12-81"><a href="#cb12-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-82"><a href="#cb12-82" aria-hidden="true" tabindex="-1"></a><span class="vs">.county {</span></span>
<span id="cb12-83"><a href="#cb12-83" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb12-84"><a href="#cb12-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-85"><a href="#cb12-85" aria-hidden="true" tabindex="-1"></a><span class="vs">.state {</span></span>
<span id="cb12-86"><a href="#cb12-86" aria-hidden="true" tabindex="-1"></a><span class="vs">  pointer-events: none;</span></span>
<span id="cb12-87"><a href="#cb12-87" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb12-88"><a href="#cb12-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-89"><a href="#cb12-89" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/style&gt;`</span></span>
<span id="cb12-90"><a href="#cb12-90" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb12-91"><a href="#cb12-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-92"><a href="#cb12-92" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs setup}</span></span>
<span id="cb12-93"><a href="#cb12-93" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">'d3@7'</span><span class="op">,</span> <span class="st">'d3-geo@3'</span>)</span>
<span id="cb12-94"><a href="#cb12-94" aria-hidden="true" tabindex="-1"></a>topojson <span class="op">=</span> <span class="pp">require</span>(<span class="st">'topojson-client@3'</span>)</span>
<span id="cb12-95"><a href="#cb12-95" aria-hidden="true" tabindex="-1"></a>d3tip <span class="op">=</span> <span class="pp">require</span>(<span class="st">'https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.9.1/d3-tip.js'</span>)</span>
<span id="cb12-96"><a href="#cb12-96" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb12-97"><a href="#cb12-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-100"><a href="#cb12-100" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb12-101"><a href="#cb12-101" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { Legend } <span class="im">from</span> <span class="st">'@d3/color-legend'</span></span>
<span id="cb12-102"><a href="#cb12-102" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb12-103"><a href="#cb12-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-106"><a href="#cb12-106" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb12-107"><a href="#cb12-107" aria-hidden="true" tabindex="-1"></a>projection <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoAlbersUsa</span>()</span>
<span id="cb12-108"><a href="#cb12-108" aria-hidden="true" tabindex="-1"></a>alb_path <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoPath</span>()<span class="op">.</span><span class="fu">projection</span>(projection)</span>
<span id="cb12-109"><a href="#cb12-109" aria-hidden="true" tabindex="-1"></a>alt_us <span class="op">=</span> <span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">'current-all.geojson'</span>)<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb12-110"><a href="#cb12-110" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb12-111"><a href="#cb12-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-112"><a href="#cb12-112" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span>{ojs albers<span class="op">-</span>map}</span>
<span id="cb12-113"><a href="#cb12-113" aria-hidden="true" tabindex="-1"></a>us <span class="op">=</span> <span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">'counties-10m.json'</span>)<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb12-114"><a href="#cb12-114" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb12-115"><a href="#cb12-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-116"><a href="#cb12-116" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span>{ojs transform<span class="op">-</span>data}</span>
<span id="cb12-117"><a href="#cb12-117" aria-hidden="true" tabindex="-1"></a>county_data_transposed <span class="op">=</span> <span class="fu">transpose</span>(county_data)</span>
<span id="cb12-118"><a href="#cb12-118" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb12-119"><a href="#cb12-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-120"><a href="#cb12-120" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span>{ojs mapify<span class="op">-</span>data}</span>
<span id="cb12-121"><a href="#cb12-121" aria-hidden="true" tabindex="-1"></a>map_data <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>(county_data_transposed<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> [ d<span class="op">.</span><span class="at">FIPS</span><span class="op">,</span> d<span class="op">.</span><span class="at">value</span> ]))<span class="op">;</span></span>
<span id="cb12-122"><a href="#cb12-122" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb12-123"><a href="#cb12-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-124"><a href="#cb12-124" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span>{ojs setup<span class="op">-</span>fill<span class="op">-</span>scale}</span>
<span id="cb12-125"><a href="#cb12-125" aria-hidden="true" tabindex="-1"></a>value_range <span class="op">=</span> d3<span class="op">.</span><span class="fu">extent</span>(county_data_transposed<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">value</span>))</span>
<span id="cb12-126"><a href="#cb12-126" aria-hidden="true" tabindex="-1"></a>scale_fill_viridis_cividis <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleSequential</span>(d3<span class="op">.</span><span class="at">interpolateCividis</span>)<span class="op">.</span><span class="fu">domain</span>(value_range)</span>
<span id="cb12-127"><a href="#cb12-127" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb12-128"><a href="#cb12-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-129"><a href="#cb12-129" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span>{ojs legendary}</span>
<span id="cb12-130"><a href="#cb12-130" aria-hidden="true" tabindex="-1"></a><span class="fu">Legend</span>(d3<span class="op">.</span><span class="fu">scaleSequential</span>(value_range<span class="op">,</span> d3<span class="op">.</span><span class="at">interpolateCividis</span>)<span class="op">,</span> {</span>
<span id="cb12-131"><a href="#cb12-131" aria-hidden="true" tabindex="-1"></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">'Some Descriptive Legend Title'</span></span>
<span id="cb12-132"><a href="#cb12-132" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb12-133"><a href="#cb12-133" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb12-134"><a href="#cb12-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-135"><a href="#cb12-135" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span>{ojs the<span class="op">-</span>choropleth}</span>
<span id="cb12-136"><a href="#cb12-136" aria-hidden="true" tabindex="-1"></a>chart <span class="op">=</span> {</span>
<span id="cb12-137"><a href="#cb12-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-138"><a href="#cb12-138" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> width <span class="op">=</span> <span class="dv">960</span></span>
<span id="cb12-139"><a href="#cb12-139" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> height <span class="op">=</span> <span class="dv">600</span></span>
<span id="cb12-140"><a href="#cb12-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-141"><a href="#cb12-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-142"><a href="#cb12-142" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb12-143"><a href="#cb12-143" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> width)</span>
<span id="cb12-144"><a href="#cb12-144" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> height)</span>
<span id="cb12-145"><a href="#cb12-145" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> width<span class="op">,</span> height])</span>
<span id="cb12-146"><a href="#cb12-146" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"style"</span><span class="op">,</span> <span class="st">"width: 100%; height: auto; height: intrinsic;"</span>)</span>
<span id="cb12-147"><a href="#cb12-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-148"><a href="#cb12-148" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> tip <span class="op">=</span> <span class="fu">d3tip</span>()<span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'d3-tip'</span>)</span>
<span id="cb12-149"><a href="#cb12-149" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">html</span>((evt<span class="op">,</span> d) <span class="kw">=&gt;</span> map_data<span class="op">.</span><span class="fu">get</span>(d<span class="op">.</span><span class="at">id</span>))</span>
<span id="cb12-150"><a href="#cb12-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-151"><a href="#cb12-151" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">call</span>(tip)</span>
<span id="cb12-152"><a href="#cb12-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-153"><a href="#cb12-153" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb12-154"><a href="#cb12-154" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"county"</span>)</span>
<span id="cb12-155"><a href="#cb12-155" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb12-156"><a href="#cb12-156" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(topojson<span class="op">.</span><span class="fu">feature</span>(us<span class="op">,</span> us<span class="op">.</span><span class="at">objects</span><span class="op">.</span><span class="at">counties</span>)<span class="op">.</span><span class="at">features</span>)</span>
<span id="cb12-157"><a href="#cb12-157" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb12-158"><a href="#cb12-158" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb12-159"><a href="#cb12-159" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">'fill'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scale_fill_viridis_cividis</span>(d<span class="op">.</span><span class="at">val</span> <span class="op">=</span> map_data<span class="op">.</span><span class="fu">get</span>(d<span class="op">.</span><span class="at">id</span>)))</span>
<span id="cb12-160"><a href="#cb12-160" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">on</span>(<span class="st">'mouseover'</span><span class="op">,</span> tip<span class="op">.</span><span class="at">show</span>)</span>
<span id="cb12-161"><a href="#cb12-161" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">on</span>(<span class="st">'mouseout'</span> <span class="op">,</span> tip<span class="op">.</span><span class="at">hide</span>)</span>
<span id="cb12-162"><a href="#cb12-162" aria-hidden="true" tabindex="-1"></a>        <span class="co">// .on('click', (evt, d) =&gt; console.log(d)) //window.location.href = "https://kagi.com/search?q=" + d.id  }) // whatev</span></span>
<span id="cb12-163"><a href="#cb12-163" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">'stroke'</span><span class="op">,</span> <span class="st">'#c3c3c399'</span>)</span>
<span id="cb12-164"><a href="#cb12-164" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">'stroke-width'</span><span class="op">,</span> <span class="fl">0.5</span>)</span>
<span id="cb12-165"><a href="#cb12-165" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">'d'</span><span class="op">,</span> alb_path) <span class="co">// projected path</span></span>
<span id="cb12-166"><a href="#cb12-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-167"><a href="#cb12-167" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb12-168"><a href="#cb12-168" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">datum</span>(topojson<span class="op">.</span><span class="fu">mesh</span>(us<span class="op">,</span> us<span class="op">.</span><span class="at">objects</span><span class="op">.</span><span class="at">states</span><span class="op">,</span> (a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">!==</span> b))</span>
<span id="cb12-169"><a href="#cb12-169" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'state'</span>)</span>
<span id="cb12-170"><a href="#cb12-170" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'fill'</span><span class="op">,</span> <span class="st">'none'</span>)</span>
<span id="cb12-171"><a href="#cb12-171" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'stroke'</span><span class="op">,</span> <span class="st">'#ffffff'</span>)</span>
<span id="cb12-172"><a href="#cb12-172" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'stroke-width'</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb12-173"><a href="#cb12-173" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> alb_path) <span class="co">// projected path</span></span>
<span id="cb12-174"><a href="#cb12-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-175"><a href="#cb12-175" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb12-176"><a href="#cb12-176" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb12-177"><a href="#cb12-177" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">data</span>(alt_us<span class="op">.</span><span class="at">features</span>)</span>
<span id="cb12-178"><a href="#cb12-178" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">'path'</span>)</span>
<span id="cb12-179"><a href="#cb12-179" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'stroke'</span><span class="op">,</span> <span class="st">'#e31a1c'</span>)</span>
<span id="cb12-180"><a href="#cb12-180" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'stroke-width'</span><span class="op">,</span> <span class="fl">0.5</span>)</span>
<span id="cb12-181"><a href="#cb12-181" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'fill'</span><span class="op">,</span> <span class="st">'#252525aa'</span>)</span>
<span id="cb12-182"><a href="#cb12-182" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'d'</span><span class="op">,</span> alb_path) <span class="co">// projected path</span></span>
<span id="cb12-183"><a href="#cb12-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-184"><a href="#cb12-184" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span>(svg<span class="op">.</span><span class="fu">node</span>())</span>
<span id="cb12-185"><a href="#cb12-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-186"><a href="#cb12-186" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-187"><a href="#cb12-187" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>